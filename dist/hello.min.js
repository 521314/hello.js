/*! hellojs - v0.2.2 - 2014-04-20 */
!function(e,t,n){var r=function(e,n,r){var i="string"==typeof e?t.createElement(e):e;if("object"==typeof n)if("tagName"in n)r=n;else for(var o in n)if(n.hasOwnProperty(o))if("object"==typeof n[o])for(var s in n[o])n[o].hasOwnProperty(s)&&(i[o][s]=n[o][s]);else"html"===o?i.innerHTML=n[o]:/^on/.test(o)?i[o]=n[o]:i.setAttribute(o,n[o]);return"body"===r?function a(){t.body?t.body.appendChild(i):setTimeout(a,16)}():"object"==typeof r?r.appendChild(i):"string"==typeof r&&t.getElementsByTagName(r)[0].appendChild(i),i},i=function(e,t){var n={},r=0,i=null,o=null;for(o in e)if(e.hasOwnProperty(o))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[o])for(o in t[0])if(e.hasOwnProperty(o)&&o in e)return t[0];for(o in e)if(e.hasOwnProperty(o))if(i=typeof t[r],"function"==typeof e[o]&&e[o].test(t[r])||"string"==typeof e[o]&&(e[o].indexOf("s")>-1&&"string"===i||e[o].indexOf("o")>-1&&"object"===i||e[o].indexOf("i")>-1&&"number"===i||e[o].indexOf("a")>-1&&"object"===i||e[o].indexOf("f")>-1&&"function"===i))n[o]=t[r++];else if("string"==typeof e[o]&&e[o].indexOf("!")>-1)return!1;return n},o=function I(e){if("nodeName"in e)return e;var t,n={};for(t in e)n[t]="object"==typeof e[t]?I(e[t]):e[t];return n},s=function(t,n){var r="HTML"+(t||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return e[r]?n instanceof e[r]:e.Element?n instanceof e.Element&&(!t||n.tagName&&n.tagName.toLowerCase()===t):!(n instanceof Object||n instanceof Array||n instanceof String||n instanceof Number)&&n.tagName&&n.tagName.toLowerCase()===t},a=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&(t[r.name]="file"===r.type?r:r.value||r.innerHTML)}return t},c=function(t,n){return function(r){var i=r.data;if(t("form",i)?i=n(i.elements):"NodeList"in e&&i instanceof NodeList?i=n(i):t("input",i)&&(i=n([i])),("File"in e&&i instanceof e.File||"Blob"in e&&i instanceof e.Blob||"FileList"in e&&i instanceof e.FileList)&&(i={file:i}),!("FormData"in e&&i instanceof e.FormData))for(var o in i)if(i.hasOwnProperty(o))if("FileList"in e&&i[o]instanceof e.FileList)1===i[o].length&&(i[o]=i[o][0]);else{if(t("input",i[o])&&"file"===i[o].type)continue;t("input",i[o])||t("select",i[o])||t("textArea",i[o])?i[o]=i[o].value:t(null,i[o])&&(i[o]=i[o].innerHTML||i[o].innerText)}return r.data=i,i}}(s,a),u=function(e,t){for(var n=[],r=0;r<t.length;r++)-1===this.indexOf(e,t[r])&&n.push(t[r]);return n},f=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},l=function(e){return function(){this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(e,t){if(t&&"function"==typeof t)for(var n=e.split(/[\s\,]+/),r=0;r<n.length;r++)this.events[n[r]]=[t].concat(this.events[n[r]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||this.events[e].splice(n,1)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(e,n){t[t.length-1]=e,this.events[e][n].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e,n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.success=function(e){return this.on("success",e)},this.error=function(e){return this.on("error",e)},this.complete=function(e){return this.on("complete",e)},this.findEvents=function(t,n){var r=t.split(/[\s\,]+/);for(var i in this.events)if(this.events.hasOwnProperty(i)&&e(r,i)>-1)for(var o=0;o<this.events[i].length;o++)n.call(this,i,o)}}}(f),p=function(e,t){for(var n in t)e[n]=t[n]},d=function(t,n){return n=n||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),e[n]=function(){var r=t.apply(this,arguments);if(r)try{delete e[n]}catch(i){}},n},h=function(t){return function(n){var r=e;for(var i in n)if(n.hasOwnProperty(i)&&(t("input",n[i])&&"file"===n[i].type||"FileList"in r&&n[i]instanceof r.FileList||"File"in r&&n[i]instanceof r.File||"Blob"in r&&n[i]instanceof r.Blob))return!0;return!1}}(s),m=function(e){return function(t){return e("iframe",{src:t,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")}}(r),v=function(e){if(!e)return!0;if(e&&e.length>0)return!1;if(e&&0===e.length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},g=function(n,r){return function(i,o,s,a){var c,u,f=0,l=t.getElementsByTagName("head")[0],p={error:{message:"server_error",code:"server_error"}},d=function(){f++||e.setTimeout(function(){o(p),l.removeChild(u)},0)},h=r(function(e){return p=e,!0},s);if("function"!=typeof i){var m=i;m=m.replace(new RegExp("=\\?(&|$)"),"="+h+"$1"),i=function(e,t){t(e(m,e))}}i(function(e){for(var t in e)e.hasOwnProperty(t)&&"?"===e[t]&&(e[t]=h)},function(t){u=n("script",{id:h,name:h,src:t,async:!0,onload:d,onerror:d,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&d()}}),e.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(c=n("script",{text:"document.getElementById('"+h+"').onerror();"}),u.async=!1),a&&e.setTimeout(function(){p={error:{message:"timeout",code:"timeout"}},d()},a),l.appendChild(u),c&&l.appendChild(c)})}}(r,d),y=function j(e,t){var n,r={};if("object"==typeof e&&"object"==typeof t){for(n in e)r[n]=e[n],n in t&&(r[n]=j(e[n],t[n]));for(n in t)n in e||(r[n]=t[n])}else r=t;return r},w=function(){function e(){}return Object.create?Object.create:function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}(),b=function(e){var t,n,r={};if("string"==typeof e){if(n=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<n.length;i++)t=n[i].match(/([^=]+)=(.*)/),r[t[1]]=decodeURIComponent(t[2]);return r}var o=e;r=[];for(var s in o)o.hasOwnProperty(s)&&o.hasOwnProperty(s)&&r.push([s,"?"===o[s]?"?":encodeURIComponent(o[s])].join("="));return r.join("&")},k=function(e,n){return function(r,i,o,s,a,c){var u=t;if("function"!=typeof r){var f=r;r=function(e,t){t(e(f,e))}}var l,p=null,d=[],h=0,m=null,v=0,g=function(e){v++||s(e)};n(g,a);var y;try{y=u.createElement('<iframe name="'+a+'">')}catch(w){y=u.createElement("iframe")}if(y.name=a,y.id=a,y.style.display="none",o&&o.callbackonload&&(y.onload=function(){g({response:"posted",message:"Content was posted"})}),c&&setTimeout(function(){g({error:{code:"timeout",message:"The post operation timed out"}})},c),u.body.appendChild(y),e("form",i)){for(p=i.form,h=0;h<p.elements.length;h++)p.elements[h]!==i&&p.elements[h].setAttribute("disabled",!0);i=p}if(e("form",i))for(p=i,h=0;h<p.elements.length;h++)p.elements[h].disabled||"file"!==p.elements[h].type||(p.encoding=p.enctype="multipart/form-data",p.elements[h].setAttribute("name","file"));else{for(m in i)i.hasOwnProperty(m)&&e("input",i[m])&&"file"===i[m].type&&(p=i[m].form,p.encoding=p.enctype="multipart/form-data");p||(p=u.createElement("form"),u.body.appendChild(p),l=p);var b;for(m in i)if(i.hasOwnProperty(m)){var k=e("input",i[m])||e("textArea",i[m])||e("select",i[m]);if(k&&i[m].form===p)k&&i[m].name!==m&&(i[m].setAttribute("name",m),i[m].name=m);else{var _=p.elements[m];if(b)for(_ instanceof NodeList||(_=[_]),h=0;h<_.length;h++)_[h].parentNode.removeChild(_[h]);b=u.createElement("input"),b.setAttribute("type","hidden"),b.setAttribute("name",m),b.value=k?i[m].value:e(null,i[m])?i[m].innerHTML||i[m].innerText:i[m],p.appendChild(b)}}for(h=0;h<p.elements.length;h++)b=p.elements[h],b.name in i||b.getAttribute("disabled")===!0||(b.setAttribute("disabled",!0),d.push(b))}p.setAttribute("method","POST"),p.setAttribute("target",a),p.target=a,r({},function(e){p.setAttribute("action",e),setTimeout(function(){p.submit(),setTimeout(function(){try{l&&l.parentNode.removeChild(l)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<d.length;n++)d[n]&&(d[n].setAttribute("disabled",!1),d[n].disabled=!1)},0)},100)})}}(s,d),_=function(e,t){return function(n,r){if(r){var i;for(var o in r)if(n.indexOf(o)>-1){var s="[\\?\\&]"+o+"=[^\\&]*";i=new RegExp(s),n=n.replace(i,"")}}return n+(t(r)?"":(n.indexOf("?")>-1?"&":"?")+e(r))}}(b,v),x=function(t){var n=e.location;for(0===t.indexOf("/")?t=n.protocol+"//"+n.host+t:t.match(/^https?\:\/\//)||(t=(n.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+t).replace(/\/\.\//g,"/"));/\/[^\/]+\/\.\.\//g.test(t);)t=t.replace(/\/[^\/]+\/\.\.\//g,"/");return t},O=function(){for(var n=[e.localStorage,e.sessionStorage],r=0,i=n[r++];i;)try{i.setItem(r,r),i.removeItem(r);break}catch(o){i=n[r++]}return i||(i={getItem:function(e){e+="=";for(var n=t.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].replace(/(^\s+|\s+$)/,"");if(i&&0===i.indexOf(e))return i.substr(e.length)}return null},setItem:function(e,n){t.cookie=e+"="+n}}),function(e,t){var n=JSON.parse(i.getItem("hello"))||{};if(e&&"undefined"==typeof t)return n[e];if(e&&""===t)try{delete n[e]}catch(r){n[e]=null}else{if(!e)return n;n[e]=t}return i.setItem("hello",JSON.stringify(n)),n}}(),T=function(e){return function(t){if("object"!=typeof t)return[];for(var n=[],r=0;r<t.length;r++)t[r]&&0!==t[r].length&&-1===e(n,t[r])&&n.push(t[r]);return n}}(f),E=function(e,t){return function(n,r,i,o,s){function a(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}if("function"!=typeof r){var c=r;r=function(e,t){t(e(c,e))}}var u=new XMLHttpRequest,f=!1;"blob"===n&&(f=n,n="GET"),n=n.toUpperCase(),u.onload=function(){var e=u.response;try{e=JSON.parse(u.responseText)}catch(t){401===u.status&&(e={error:{code:"access_denied",message:u.statusText}})}var r=a(u.getAllResponseHeaders());r.statusCode=u.status,s(e||("DELETE"!==n?{error:{message:"Could not get resource"}}:{}),r)},u.onerror=function(){var e=u.responseText;try{e=JSON.parse(u.responseText)}catch(t){}s(e||{error:{code:"access_denied",message:"Could not get resource"}})};var l,p={};if("GET"===n||"DELETE"===n)e(o)||(p=t(p,o)),o=null;else if(!(!o||"string"==typeof o||o instanceof FormData||o instanceof File||o instanceof Blob)){var d=new FormData;for(l in o)o.hasOwnProperty(l)&&(o[l]instanceof HTMLInputElement?"files"in o[l]&&o[l].files.length>0&&d.append(l,o[l].files[0]):o[l]instanceof Blob?d.append(l,o[l],o.name):d.append(l,o[l]));o=d}return r(p,function(e){if(u.open(n,e,!0),f&&("responseType"in u?u.responseType=f:u.overrideMimeType("text/plain; charset=x-user-defined")),i)for(var t in i)u.setRequestHeader(t,i[t]);u.send(o)}),u}}(v,y),C=function(e,t,n){function r(e,n,r){if(t(e.network,e),!("display"in e&&"page"===e.display)){if(r){var i=e.callback;try{delete e.callback}catch(o){}if(t(e.network,e),!(i in r))return console.error("Error: Callback missing from parent window, snap!"),void 0;try{r[i](e)}catch(o){return console.error("Error thrown whilst executing parent callback, "+i,o),void 0}}try{n.close()}catch(o){}n.addEventListener("load",function(){n.close()}),console.log("Trying to close window")}}return function(t,i){var o=t.location,s=function(e){o.assign?o.assign(e):t.location=e},a=e(n(o.search||""),n(o.hash||""));if(a&&"state"in a){try{var c=JSON.parse(a.state);a=e(a,c)}catch(u){console.error("Could not decode state parameter")}"access_token"in a&&a.access_token&&a.network?(a.expires_in&&0!==parseInt(a.expires_in,10)||(a.expires_in=0),a.expires_in=parseInt(a.expires_in,10),a.expires=(new Date).getTime()/1e3+(a.expires_in||31536e3),r(a,t,i)):"error"in a&&a.error&&a.network&&(a.error={code:a.error,message:a.error_message||a.error_description},r(a,t,i)),a&&a.callback&&"result"in a&&a.result&&a.callback in i&&i[a.callback](JSON.parse(a.result))}else if("oauth_redirect"in a)return s(decodeURIComponent(a.oauth_redirect)),void 0;if(a=n(o.search),a.code&&a.state||a.oauth_token&&a.proxy_url){a.redirect_uri=o.href.replace(/[\?\#].*$/,"");var f=JSON.parse(a.state),l=(f.oauth_proxy||a.proxy_url)+"?"+n(a);s(l)}}}(y,O,b),A=function(e){var n=t.createElement("a");n.href=e},L=function(r,i){var o=t.documentElement,s=e.screen;return function(t,a,c,u){var f=e.screenLeft!==n?e.screenLeft:s.left,l=e.screenTop!==n?e.screenTop:s.top,p=e.innerWidth||o.clientWidth||s.width,d=e.innerHeight||o.clientHeight||s.height,h=(p-c)/2+f,m=(d-u)/2+l,v=function(t){var n=e.open(t,"_blank","resizeable=true,height="+u+",width="+c+",left="+h+",top="+m);return n.addEventListener("loadstart",function(t){var o=t.url;if(0===o.indexOf(a)){var s=r(o),c={location:{assign:function(e){n.addEventListener("exit",function(){setTimeout(function(){v(e)},1e3)}),c.close()},search:s.search,hash:s.hash,href:o},close:function(){n.close&&n.close()}};i(c,e)}}),n};return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(t=a+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(t))),v(t)}}(A,C);!function(t,r,i,o,s,a,c,u,f,l,p,d,h,m,v,g,y,w,b,k,_,x,O){var T=function(e){return T.use(e)};return c(T,{settings:{redirect_uri:e.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(e){return"undefined"!=typeof e?b("sync_service",e):b("sync_service")},services:{},use:function(e){var t=m(this);return t.settings=m(this.settings),e&&(t.settings.default_service=e),a.call(t),t},init:function(e,t){if(!e)return this.services;for(var n in e)e.hasOwnProperty(n)&&"object"!=typeof e[n]&&(e[n]={id:e[n]});this.services=h(this.services,e);for(n in this.services)this.services.hasOwnProperty(n)&&(this.services[n].scope=this.services[n].scope||{});return t&&(this.settings=h(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=w(t.redirect_uri))),this},login:function(){function t(e){var t;f||(f=!0,e.error?t="complete error failed auth.failed":(t="complete success login auth.login auth",b(e.network,e),e={network:e.network,authResponse:e}),n.emit(t,e))}var n=this.use(),i=r({network:"s",options:"o",callback:"f"},arguments);n.args=i;var o,a=i.options=h(n.settings,i.options||{});if(i.network=n.settings.default_service=i.network||n.settings.default_service,n.on("complete",i.callback),"string"!=typeof i.network||!(i.network in n.services))return n.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),n;var c=n.services[i.network],f=!1,p=u(t);i.qs={client_id:c.id,response_type:a.response_type,redirect_uri:a.redirect_uri,display:a.display,scope:"basic",state:{client_id:c.id,network:i.network,display:a.display,callback:p,state:a.state,oauth_proxy:a.oauth_proxy}};var d=b(i.network),m=a.scope;if(m&&"string"!=typeof m&&(m=m.join(",")),m=(m?m+",":"")+i.qs.scope,d&&"scope"in d&&(m+=","+d.scope.join(",")),i.qs.state.scope=k(m.split(/[,\s]+/)),i.qs.scope=m.replace(/[^,\s]+/gi,function(e){return e in c.scope?c.scope[e]:""}).replace(/[,\s]+/gi,","),i.qs.scope=k(i.qs.scope.split(/,+/)).join(c.scope_delim||","),a.force===!1&&d&&"access_token"in d&&d.access_token&&"expires"in d&&d.expires>(new Date).getTime()/1e3){var v=s(d.scope||[],i.qs.state.scope||[]);if(0===v.length)return n.emit("notice","User already has a valid access_token"),n.emitAfter("complete success login",{network:i.network,authResponse:d}),n}if(i.qs.redirect_uri=w(i.qs.redirect_uri),c.oauth&&(i.qs.state.oauth=c.oauth),i.qs.state=JSON.stringify(i.qs.state),"login"in c&&"function"==typeof c.login&&c.login(i),o=1===parseInt(c.oauth.version,10)?y(a.oauth_proxy,i.qs):y(c.oauth.auth,i.qs),n.emit("notice","Authorization URL "+o),"none"===a.display)l(o);else if("popup"===a.display){var g=O(o,a.redirect_uri,a.window_width||500,a.window_height||500);g&&g.focus&&g.focus();var _=setInterval(function(){g.closed&&(clearInterval(_),t({error:{code:"cancelled",message:"Login has been cancelled"}}))},100)}else e.location=o;return n},logout:function(){var e=this.use(),t=r({name:"s",options:"o",callback:"f"},arguments);if(t.options=t.options||{},e.on("complete",t.callback),t.name=t.name||e.settings.default_service,!t.name||t.name in e.services)if(t.name&&b(t.name)){var i=function(n){b(t.name,""),e.emitAfter("complete logout success auth.logout auth",h({network:t.name},n||{}))},o={};if(t.options.force){var s=e.services[t.name].logout;if(s)if("function"==typeof s&&(s=s(i)),"string"==typeof s)l(s),o.force=null,o.message="Logout success on providers site was indeterminate";else if(s===n)return e}i(o)}else if(t.name)e.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}});else{for(var a in e.services)e.services.hasOwnProperty(a)&&e.logout(a);e.service(!1)}else e.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}});return e},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?b(e)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),a.call(T),function(t){var n={},r={};t.on("auth.login, auth.logout",function(e){e&&"object"==typeof e&&e.network&&(n[e.network]=b(e.network)||{})}),function i(){var o=(new Date).getTime()/1e3,s=function(e){t.emit("auth."+e,{network:a,authResponse:c})};for(var a in t.services)if(t.services.hasOwnProperty(a)){if(!t.services[a].id)continue;var c=b(a)||{},u=t.services[a],f=n[a]||{};if(c&&"callback"in c){var l=c.callback;try{delete c.callback}catch(p){}b(a,c);try{e[l](c)}catch(p){}}if(c&&"expires"in c&&c.expires<o){var d=!("autorefresh"in u)||u.autorefresh;!d||a in r&&!(r[a]<o)?d||a in r||(s("expired"),r[a]=!0):(t.emit("notice",a+" has expired trying to resignin"),t.login(a,{display:"none",force:!1}),r[a]=o+600);continue}if(f.access_token===c.access_token&&f.expires===c.expires)continue;!c.access_token&&f.access_token?s("logout"):c.access_token&&!f.access_token?s("login"):c.expires!==f.expires&&s("update"),n[a]=c,a in r&&delete r[a]}setTimeout(i,1e3)}()}(T),x(e,e.opener||e.parent),T.api=function(){function t(t){if(s.data=i(c),"get"===s.method){for(var r,o=/[\?\&]([^=&]+)(=([^&]+))?/gi;r=o.exec(t);)s.data[r[1]]=r[3];t=t.replace(/\?.*/,"")}var l=v[{"delete":"del"}[s.method]||s.method]||{},m=l[t]||l["default"]||t,k=function(t){t=t.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(e,t,n){var r=n?n.replace(/^\|/,""):"";return t in s.data?(r=s.data[t],delete s.data[t]):"undefined"==typeof n&&a.emitAfter("error",{error:{code:"missing_attribute_"+t,message:"The attribute "+t+" is missing from the request"}}),r}),t.match(/^https?:\/\//)||(t=v.base+t);var r={},i=function(e,i){e&&("function"==typeof e?e(r):r=h(r,e));var o=y(t,r||{});a.emit("notice","Request "+o),n(s.network,o,s.method,s.data,v.querystring,i)};if(!p(s.data)&&!("FileList"in e)&&f(s.data))return g(i,s.data,"form"in v?v.form(s):null,w),a;if("delete"===s.method){var o=w;w=function(e,t){o(!e||p(e)?{success:!0}:e,t)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in v)||v.xhr&&v.xhr(s,r))){var c=_(s.method,i,s.headers,s.data,w);c.onprogress=function(e){a.emit("progress",e)},c.upload.onprogress=function(e){a.emit("uploadprogress",e)}}else{if(s.callbackID=u(),"jsonp"in v&&v.jsonp(s,r),"api"in v&&v.api(t,s,{access_token:b.access_token},w))return;"post"===s.method?(r.redirect_uri=a.settings.redirect_uri,r.state=JSON.stringify({callback:s.callbackID}),g(i,s.data,"form"in v?v.form(s):null,w,s.callbackID,a.settings.timeout)):(r=h(r,s.data),r.callback=s.callbackID,d(i,w,s.callbackID,a.settings.timeout))}};"function"==typeof m?m(s,k):k(m)}function n(e,t,n,r,i,o){var s=a.services[e],c=b?b.access_token:null,u=s.oauth&&1===parseInt(s.oauth.version,10)?a.settings.oauth_proxy:null;if(u)return o(y(u,{path:t,access_token:c||"",then:"get"===n.toLowerCase()?"redirect":"proxy",method:n,suppress_response_codes:!0})),void 0;var f={access_token:c||""};i&&i(f),o(y(t,f))}var s=r({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),a=this.use();o(s),a.args=s,s.method=(s.method||"get").toLowerCase();var c=s.data=s.data||{};a.on("complete",s.callback),s.path=s.path.replace(/^\/+/,"");var l=(s.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(l in a.services){s.network=l;var m=new RegExp("^"+l+":?/?");s.path=s.path.replace(m,"")}s.network=a.settings.default_service=s.network||a.settings.default_service;var v=a.services[s.network];if(!v)return a.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+s.network}}),a;s.timeout&&(a.settings.timeout=s.timeout),a.emit("notice","API request "+s.method.toUpperCase()+" '"+s.path+"' (request)",s);var w=function(e,n){if(v.wrap&&(s.path in v.wrap||"default"in v.wrap)){var r=s.path in v.wrap?s.path:"default",i=(new Date).getTime(),o=v.wrap[r](e,n,s);o&&(e=o),a.emit("notice","Processing took"+((new Date).getTime()-i))}a.emit("notice","API: "+s.method.toUpperCase()+" '"+s.path+"' (response)",e);var c=null;e&&"paging"in e&&e.paging.next&&(c=function(){t((e.paging.next.match(/^\?/)?s.path:"")+e.paging.next)}),a.emit("complete "+(!e||"error"in e?"error":"success"),e,c)};if(s.method in v&&s.path in v[s.method]&&v[s.method][s.path]===!1)return a.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var b=a.getAuthResponse(s.network);return t(s.path),a},e.hello=T,T}(r,i,o,c,u,l,p,d,h,m,v,g,y,w,b,k,_,x,O,T,E,C,L)}(window,document);
if(typeof define==='function'&&define.amd){define(function(){return hello;});}