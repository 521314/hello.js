/*! hellojs - v0.2.2 - 2014-04-23 */
!function(a,b,c){{var d=function(a,c,d){var e="string"==typeof a?b.createElement(a):a;if("object"==typeof c)if("tagName"in c)d=c;else for(var f in c)if(c.hasOwnProperty(f))if("object"==typeof c[f])for(var g in c[f])c[f].hasOwnProperty(g)&&(e[f][g]=c[f][g]);else"html"===f?e.innerHTML=c[f]:/^on/.test(f)?e[f]=c[f]:e.setAttribute(f,c[f]);return"body"===d?!function h(){b.body?b.body.appendChild(e):setTimeout(h,16)}():"object"==typeof d?d.appendChild(e):"string"==typeof d&&b.getElementsByTagName(d)[0].appendChild(e),e},e=function(a,b){var c={},d=0,e=null,f=null;for(f in a)if(a.hasOwnProperty(f))break;if(1===b.length&&"object"==typeof b[0]&&"o!"!=a[f])for(f in b[0])if(a.hasOwnProperty(f)&&f in a)return b[0];for(f in a)if(a.hasOwnProperty(f))if(e=typeof b[d],"function"==typeof a[f]&&a[f].test(b[d])||"string"==typeof a[f]&&(a[f].indexOf("s")>-1&&"string"===e||a[f].indexOf("o")>-1&&"object"===e||a[f].indexOf("i")>-1&&"number"===e||a[f].indexOf("a")>-1&&"object"===e||a[f].indexOf("f")>-1&&"function"===e))c[f]=b[d++];else if("string"==typeof a[f]&&a[f].indexOf("!")>-1)return!1;return c},f=function E(a){if("nodeName"in a)return a;var b,c={};for(b in a)c[b]="object"==typeof a[b]?E(a[b]):a[b];return c},g=function(b,c){var d="HTML"+(b||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return a[d]?c instanceof a[d]:a.Element?c instanceof a.Element&&(!b||c.tagName&&c.tagName.toLowerCase()===b):!(c instanceof Object||c instanceof Array||c instanceof String||c instanceof Number)&&c.tagName&&c.tagName.toLowerCase()===b},h=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];!d.disabled&&d.name&&(b[d.name]="file"===d.type?d:d.value||d.innerHTML)}return b},i=function(b,c){return function(d){var e=d.data;if(b("form",e)?e=c(e.elements):"NodeList"in a&&e instanceof NodeList?e=c(e):b("input",e)&&(e=c([e])),("File"in a&&e instanceof a.File||"Blob"in a&&e instanceof a.Blob||"FileList"in a&&e instanceof a.FileList)&&(e={file:e}),!("FormData"in a&&e instanceof a.FormData))for(var f in e)if(e.hasOwnProperty(f))if("FileList"in a&&e[f]instanceof a.FileList)1===e[f].length&&(e[f]=e[f][0]);else{if(b("input",e[f])&&"file"===e[f].type)continue;b("input",e[f])||b("select",e[f])||b("textArea",e[f])?e[f]=e[f].value:b(null,e[f])&&(e[f]=e[f].innerHTML||e[f].innerText)}return d.data=e,e}}(g,h),j=function(a,b){for(var c=[],d=0;d<b.length;d++)-1===this.indexOf(a,b[d])&&c.push(b[d]);return c},k=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},l=function(a){return function(){this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(a,b){if(b&&"function"==typeof b)for(var c=a.split(/[\s\,]+/),d=0;d<c.length;d++)this.events[c[d]]=[b].concat(this.events[c[d]]||[]);return this},this.off=function(a,b){return this.findEvents(a,function(a,c){b&&this.events[a][c]!==b||this.events[a].splice(c,1)}),this},this.emit=function(a){var b=Array.prototype.slice.call(arguments,1);b.push(a);for(var c=function(a,c){b[b.length-1]=a,this.events[a][c].apply(this,b)},d=this;d&&d.findEvents;)d.findEvents(a,c),d=d.parent;return this},this.emitAfter=function(){var a=this,b=arguments;return setTimeout(function(){a.emit.apply(a,b)},0),this},this.success=function(a){return this.on("success",a)},this.error=function(a){return this.on("error",a)},this.complete=function(a){return this.on("complete",a)},this.findEvents=function(b,c){var d=b.split(/[\s\,]+/);for(var e in this.events)if(this.events.hasOwnProperty(e)&&a(d,e)>-1)for(var f=0;f<this.events[e].length;f++)c.call(this,e,f)}}}(k),m=function(a,b){for(var c in b)a[c]=b[c]},n=function(b,c){return c=c||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),a[c]=function(){var d=b.apply(this,arguments);if(d)try{delete a[c]}catch(e){}},c},o=function(b){return function(c){var d=a;for(var e in c)if(c.hasOwnProperty(e)&&(b("input",c[e])&&"file"===c[e].type||"FileList"in d&&c[e]instanceof d.FileList||"File"in d&&c[e]instanceof d.File||"Blob"in d&&c[e]instanceof d.Blob))return!0;return!1}}(g),p=function(a){return function(b){return a("iframe",{src:b,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")}}(d),q=function(a){if(!a)return!0;if(a&&a.length>0)return!1;if(a&&0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},r=function(c,d){return function(e,f,g,h){var i,j,k=0,l=b.getElementsByTagName("head")[0],m={error:{message:"server_error",code:"server_error"}},n=function(){k++||a.setTimeout(function(){f(m),l.removeChild(j)},0)},o=d(function(a){return m=a,!0},g);if("function"!=typeof e){var p=e;p=p.replace(new RegExp("=\\?(&|$)"),"="+o+"$1"),e=function(a,b){b(a(p,a))}}e(function(a){for(var b in a)a.hasOwnProperty(b)&&"?"===a[b]&&(a[b]=o)},function(b){j=c("script",{id:o,name:o,src:b,async:!0,onload:n,onerror:n,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&n()}}),a.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=c("script",{text:"document.getElementById('"+o+"').onerror();"}),j.async=!1),h&&a.setTimeout(function(){m={error:{message:"timeout",code:"timeout"}},n()},h),l.appendChild(j),i&&l.appendChild(i)})}}(d,n),s=function F(a,b){var c,d={};if("object"==typeof a&&"object"==typeof b){for(c in a)d[c]=a[c],c in b&&(d[c]=F(a[c],b[c]));for(c in b)c in a||(d[c]=b[c])}else d=b;return d},t=function(){function a(){}return Object.create?Object.create:function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}(),u=function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},v=function(a,c){return function(d,e,f,g,h,i){var j=b;if("function"!=typeof d){var k=d;d=function(a,b){b(a(k,a))}}var l,m=null,n=[],o=0,p=null,q=0,r=function(a){q++||g(a)};c(r,h);var s;try{s=j.createElement('<iframe name="'+h+'">')}catch(t){s=j.createElement("iframe")}if(s.name=h,s.id=h,s.style.display="none",f&&f.callbackonload&&(s.onload=function(){r({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){r({error:{code:"timeout",message:"The post operation timed out"}})},i),j.body.appendChild(s),a("form",e)){for(m=e.form,o=0;o<m.elements.length;o++)m.elements[o]!==e&&m.elements[o].setAttribute("disabled",!0);e=m}if(a("form",e))for(m=e,o=0;o<m.elements.length;o++)m.elements[o].disabled||"file"!==m.elements[o].type||(m.encoding=m.enctype="multipart/form-data",m.elements[o].setAttribute("name","file"));else{for(p in e)e.hasOwnProperty(p)&&a("input",e[p])&&"file"===e[p].type&&(m=e[p].form,m.encoding=m.enctype="multipart/form-data");m||(m=j.createElement("form"),j.body.appendChild(m),l=m);var u;for(p in e)if(e.hasOwnProperty(p)){var v=a("input",e[p])||a("textArea",e[p])||a("select",e[p]);if(v&&e[p].form===m)v&&e[p].name!==p&&(e[p].setAttribute("name",p),e[p].name=p);else{var w=m.elements[p];if(u)for(w instanceof NodeList||(w=[w]),o=0;o<w.length;o++)w[o].parentNode.removeChild(w[o]);u=j.createElement("input"),u.setAttribute("type","hidden"),u.setAttribute("name",p),u.value=v?e[p].value:a(null,e[p])?e[p].innerHTML||e[p].innerText:e[p],m.appendChild(u)}}for(o=0;o<m.elements.length;o++)u=m.elements[o],u.name in e||u.getAttribute("disabled")===!0||(u.setAttribute("disabled",!0),n.push(u))}m.setAttribute("method","POST"),m.setAttribute("target",h),m.target=h,d({},function(a){m.setAttribute("action",a),setTimeout(function(){m.submit(),setTimeout(function(){try{l&&l.parentNode.removeChild(l)}catch(a){try{console.error("HelloJS: could not remove iframe")}catch(b){}}for(var c=0;c<n.length;c++)n[c]&&(n[c].setAttribute("disabled",!1),n[c].disabled=!1)},0)},100)})}}(g,n),w=function(a,b){return function(c,d){if(d){var e;for(var f in d)if(c.indexOf(f)>-1){var g="[\\?\\&]"+f+"=[^\\&]*";e=new RegExp(g),c=c.replace(e,"")}}return c+(b(d)?"":(c.indexOf("?")>-1?"&":"?")+a(d))}}(u,q),x=function(b){var c=a.location;for(0===b.indexOf("/")?b=c.protocol+"//"+c.host+b:b.match(/^https?\:\/\//)||(b=(c.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+b).replace(/\/\.\//g,"/"));/\/[^\/]+\/\.\.\//g.test(b);)b=b.replace(/\/[^\/]+\/\.\.\//g,"/");return b},y=function(){for(var c=[a.localStorage,a.sessionStorage],d=0,e=c[d++];e;)try{e.setItem(d,d),e.removeItem(d);break}catch(f){e=c[d++]}return e||(e={getItem:function(a){a+="=";for(var c=b.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].replace(/(^\s+|\s+$)/,"");if(e&&0===e.indexOf(a))return e.substr(a.length)}return null},setItem:function(a,c){b.cookie=a+"="+c}}),function(a,b){var c=JSON.parse(e.getItem("hello"))||{};if(a&&"undefined"==typeof b)return c[a];if(a&&""===b)try{delete c[a]}catch(d){c[a]=null}else{if(!a)return c;c[a]=b}return e.setItem("hello",JSON.stringify(c)),c}}(),z=function(a){return function(b){if("object"!=typeof b)return[];for(var c=[],d=0;d<b.length;d++)b[d]&&0!==b[d].length&&-1===a(c,b[d])&&c.push(b[d]);return c}}(k),A=function(a,b){return function(c,d,e,f,g){function h(a){for(var b,c={},d=/([a-z\-]+):\s?(.*);?/gi;b=d.exec(a);)c[b[1]]=b[2];return c}if("function"!=typeof d){var i=d;d=function(a,b){b(a(i,a))}}var j=new XMLHttpRequest,k=!1;"blob"===c&&(k=c,c="GET"),c=c.toUpperCase(),j.onload=function(){var a=j.response;try{a=JSON.parse(j.responseText)}catch(b){401===j.status&&(a={error:{code:"access_denied",message:j.statusText}})}var d=h(j.getAllResponseHeaders());d.statusCode=j.status,g(a||("DELETE"!==c?{error:{message:"Could not get resource"}}:{}),d)},j.onerror=function(){var a=j.responseText;try{a=JSON.parse(j.responseText)}catch(b){}g(a||{error:{code:"access_denied",message:"Could not get resource"}})};var l,m={};if("GET"===c||"DELETE"===c)a(f)||(m=b(m,f)),f=null;else if(!(!f||"string"==typeof f||f instanceof FormData||f instanceof File||f instanceof Blob)){var n=new FormData;for(l in f)f.hasOwnProperty(l)&&(f[l]instanceof HTMLInputElement?"files"in f[l]&&f[l].files.length>0&&n.append(l,f[l].files[0]):f[l]instanceof Blob?n.append(l,f[l],f.name):n.append(l,f[l]));f=n}return d(m,function(a){if(j.open(c,a,!0),k&&("responseType"in j?j.responseType=k:j.overrideMimeType("text/plain; charset=x-user-defined")),e)for(var b in e)j.setRequestHeader(b,e[b]);j.send(f)}),j}}(q,s),B=function(a,b,c){function d(a,c,d){if(b(a.network,a),!("display"in a&&"page"===a.display)){if(d){var e=a.callback;try{delete a.callback}catch(f){}if(b(a.network,a),!(e in d))return void console.error("Error: Callback missing from parent window, snap!");try{d[e](a)}catch(f){return void console.error("Error thrown whilst executing parent callback, "+e,f)}}try{c.close()}catch(f){}c.addEventListener("load",function(){c.close()}),console.log("Trying to close window")}}return function(b,e){var f=b.location,g=function(a){f.assign?f.assign(a):b.location=a},h=a(c(f.search||""),c(f.hash||""));if(h&&"state"in h){try{var i=JSON.parse(h.state);h=a(h,i)}catch(j){console.error("Could not decode state parameter")}"access_token"in h&&h.access_token&&h.network?(h.expires_in&&0!==parseInt(h.expires_in,10)||(h.expires_in=0),h.expires_in=parseInt(h.expires_in,10),h.expires=(new Date).getTime()/1e3+(h.expires_in||31536e3),d(h,b,e)):"error"in h&&h.error&&h.network&&(h.error={code:h.error,message:h.error_message||h.error_description},d(h,b,e)),h&&h.callback&&"result"in h&&h.result&&h.callback in e&&e[h.callback](JSON.parse(h.result))}else if("oauth_redirect"in h)return void g(decodeURIComponent(h.oauth_redirect));if(h=c(f.search),h.code&&h.state||h.oauth_token&&h.proxy_url){h.redirect_uri=f.href.replace(/[\?\#].*$/,"");var k=JSON.parse(h.state),l=(k.oauth_proxy||h.proxy_url)+"?"+c(h);g(l)}}}(s,y,u),C=function(a){var c=b.createElement("a");return c.href=a,c},D=function(d,e){var f=b.documentElement,g=a.screen;return function(b,h,i,j){var k=a.screenLeft!==c?a.screenLeft:g.left,l=a.screenTop!==c?a.screenTop:g.top,m=a.innerWidth||f.clientWidth||g.width,n=a.innerHeight||f.clientHeight||g.height,o=(m-i)/2+k,p=(n-j)/2+l,q=function(b){var c=a.open(b,"_blank","resizeable=true,height="+j+",width="+i+",left="+o+",top="+p);return c.addEventListener&&c.addEventListener("loadstart",function(b){var f=b.url;if(0===f.indexOf(h)){var g=d(f),i={location:{assign:function(a){c.addEventListener("exit",function(){setTimeout(function(){q(a)},1e3)}),i.close()},search:g.search,hash:g.hash,href:f},close:function(){c.close&&c.close()}};e(i,a)}}),c&&c.focus&&c.focus(),c};return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(b=h+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(b))),q(b)}}(C,B);!function(b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=function(a){return z.use(a)};return i(z,{settings:{redirect_uri:a.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(a){return"undefined"!=typeof a?u("sync_service",a):u("sync_service")},services:{},use:function(a){var b=p(this);return b.settings=p(this.settings),a&&(b.settings.default_service=a),h.call(b),b},init:function(a,b){if(!a)return this.services;for(var c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&(a[c]={id:a[c]});this.services=o(this.services,a);for(c in this.services)this.services.hasOwnProperty(c)&&(this.services[c].scope=this.services[c].scope||{});return b&&(this.settings=o(this.settings,b),"redirect_uri"in b&&(this.settings.redirect_uri=t(b.redirect_uri))),this},login:function(){function b(a){var b;k||(k=!0,a.error?b="complete error failed auth.failed":(b="complete success login auth.login auth",u(a.network,a),a={network:a.network,authResponse:a}),c.emit(b,a))}var c=this.use(),e=d({network:"s",options:"o",callback:"f"},arguments);c.args=e;var f,h=e.options=o(c.settings,e.options||{});if(e.network=c.settings.default_service=e.network||c.settings.default_service,c.on("complete",e.callback),"string"!=typeof e.network||!(e.network in c.services))return c.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),c;var i=c.services[e.network],k=!1,m=j(b);e.qs={client_id:i.id,response_type:h.response_type,redirect_uri:h.redirect_uri,display:h.display,scope:"basic",state:{client_id:i.id,network:e.network,display:h.display,callback:m,state:h.state,oauth_proxy:h.oauth_proxy}};var n=u(e.network),p=h.scope;if(p&&"string"!=typeof p&&(p=p.join(",")),p=(p?p+",":"")+e.qs.scope,n&&"scope"in n&&(p+=","+n.scope.join(",")),e.qs.state.scope=v(p.split(/[,\s]+/)),e.qs.scope=p.replace(/[^,\s]+/gi,function(a){return a in i.scope?i.scope[a]:""}).replace(/[,\s]+/gi,","),e.qs.scope=v(e.qs.scope.split(/,+/)).join(i.scope_delim||","),h.force===!1&&n&&"access_token"in n&&n.access_token&&"expires"in n&&n.expires>(new Date).getTime()/1e3){var q=g(n.scope||[],e.qs.state.scope||[]);if(0===q.length)return c.emit("notice","User already has a valid access_token"),c.emitAfter("complete success login",{network:e.network,authResponse:n}),c}if(e.qs.redirect_uri=t(e.qs.redirect_uri),i.oauth&&(e.qs.state.oauth=i.oauth),e.qs.state=JSON.stringify(e.qs.state),"login"in i&&"function"==typeof i.login&&i.login(e),f=1===parseInt(i.oauth.version,10)?s(h.oauth_proxy,e.qs):s(i.oauth.auth,e.qs),c.emit("notice","Authorization URL "+f),"none"===h.display)l(f);else if("popup"===h.display)var r=y(f,h.redirect_uri,h.window_width||500,h.window_height||500),w=setInterval(function(){r.closed&&(clearInterval(w),b({error:{code:"cancelled",message:"Login has been cancelled"}}))},100);else a.location=f;return c},logout:function(){var a=this.use(),b=d({name:"s",options:"o",callback:"f"},arguments);if(b.options=b.options||{},a.on("complete",b.callback),b.name=b.name||a.settings.default_service,!b.name||b.name in a.services)if(b.name&&u(b.name)){var e=function(c){u(b.name,""),a.emitAfter("complete logout success auth.logout auth",o({network:b.name},c||{}))},f={};if(b.options.force){var g=a.services[b.name].logout;if(g)if("function"==typeof g&&(g=g(e)),"string"==typeof g)l(g),f.force=null,f.message="Logout success on providers site was indeterminate";else if(g===c)return a}e(f)}else if(b.name)a.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}});else{for(var h in a.services)a.services.hasOwnProperty(h)&&a.logout(h);a.service(!1)}else a.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}});return a},getAuthResponse:function(a){return a=a||this.settings.default_service,a&&a in this.services?u(a)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),h.call(z),function(b){var c={},d={};b.on("auth.login, auth.logout",function(a){a&&"object"==typeof a&&a.network&&(c[a.network]=u(a.network)||{})}),function e(){var f=(new Date).getTime()/1e3,g=function(a){b.emit("auth."+a,{network:h,authResponse:i})};for(var h in b.services)if(b.services.hasOwnProperty(h)){if(!b.services[h].id)continue;var i=u(h)||{},j=b.services[h],k=c[h]||{};if(i&&"callback"in i){var l=i.callback;try{delete i.callback}catch(m){}u(h,i);try{a[l](i)}catch(m){}}if(i&&"expires"in i&&i.expires<f){var n=!("autorefresh"in j)||j.autorefresh;!n||h in d&&!(d[h]<f)?n||h in d||(g("expired"),d[h]=!0):(b.emit("notice",h+" has expired trying to resignin"),b.login(h,{display:"none",force:!1}),d[h]=f+600);continue}if(k.access_token===i.access_token&&k.expires===i.expires)continue;!i.access_token&&k.access_token?g("logout"):i.access_token&&!k.access_token?g("login"):i.expires!==k.expires&&g("update"),c[h]=i,h in d&&delete d[h]}setTimeout(e,1e3)}()}(z),x(a,a.opener||a.parent),z.api=function(){function b(b){if(g.data=e(i),"get"===g.method){for(var d,f=/[\?\&]([^=&]+)(=([^&]+))?/gi;d=f.exec(b);)g.data[d[1]]=d[3];b=b.replace(/\?.*/,"")}var l=q[{"delete":"del"}[g.method]||g.method]||{},p=l[b]||l["default"]||b,v=function(b){b=b.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(a,b,c){var d=c?c.replace(/^\|/,""):"";return b in g.data?(d=g.data[b],delete g.data[b]):"undefined"==typeof c&&h.emitAfter("error",{error:{code:"missing_attribute_"+b,message:"The attribute "+b+" is missing from the request"}}),d}),b.match(/^https?:\/\//)||(b=q.base+b);var d={},e=function(a,e){a&&("function"==typeof a?a(d):d=o(d,a));var f=s(b,d||{});h.emit("notice","Request "+f),c(g.network,f,g.method,g.data,q.querystring,e)};if(!m(g.data)&&!("FileList"in a)&&k(g.data))return r(e,g.data,"form"in q?q.form(g):null,t),h;if("delete"===g.method){var f=t;t=function(a,b){f(!a||m(a)?{success:!0}:a,b)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in q)||q.xhr&&q.xhr(g,d))){var i=w(g.method,e,g.headers,g.data,t);i.onprogress=function(a){h.emit("progress",a)},i.upload.onprogress=function(a){h.emit("uploadprogress",a)}}else{if(g.callbackID=j(),"jsonp"in q&&q.jsonp(g,d),"api"in q&&q.api(b,g,{access_token:u.access_token},t))return;"post"===g.method?(d.redirect_uri=h.settings.redirect_uri,d.state=JSON.stringify({callback:g.callbackID}),r(e,g.data,"form"in q?q.form(g):null,t,g.callbackID,h.settings.timeout)):(d=o(d,g.data),d.callback=g.callbackID,n(e,t,g.callbackID,h.settings.timeout))}};"function"==typeof p?p(g,v):v(p)}function c(a,b,c,d,e,f){var g=h.services[a],i=u?u.access_token:null,j=g.oauth&&1===parseInt(g.oauth.version,10)?h.settings.oauth_proxy:null;if(j)return void f(s(j,{path:b,access_token:i||"",then:"get"===c.toLowerCase()?"redirect":"proxy",method:c,suppress_response_codes:!0}));var k={access_token:i||""};e&&e(k),f(s(b,k))}var g=d({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),h=this.use();f(g),h.args=g,g.method=(g.method||"get").toLowerCase();var i=g.data=g.data||{};h.on("complete",g.callback),g.path=g.path.replace(/^\/+/,"");var l=(g.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(l in h.services){g.network=l;var p=new RegExp("^"+l+":?/?");g.path=g.path.replace(p,"")}g.network=h.settings.default_service=g.network||h.settings.default_service;var q=h.services[g.network];if(!q)return h.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+g.network}}),h;g.timeout&&(h.settings.timeout=g.timeout),h.emit("notice","API request "+g.method.toUpperCase()+" '"+g.path+"' (request)",g);var t=function(a,c){if(q.wrap&&(g.path in q.wrap||"default"in q.wrap)){var d=g.path in q.wrap?g.path:"default",e=(new Date).getTime(),f=q.wrap[d](a,c,g);f&&(a=f),h.emit("notice","Processing took"+((new Date).getTime()-e))}h.emit("notice","API: "+g.method.toUpperCase()+" '"+g.path+"' (response)",a);var i=null;a&&"paging"in a&&a.paging.next&&(i=function(){b((a.paging.next.match(/^\?/)?g.path:"")+a.paging.next)}),h.emit("complete "+(!a||"error"in a?"error":"success"),a,i)};if(g.method in q&&g.path in q[g.method]&&q[g.method][g.path]===!1)return h.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var u=h.getAuthResponse(g.network);return b(g.path),h},a.hello=z,z}(d,e,f,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,D)}}(window,document),"function"==typeof define&&define.amd&&define(function(){return hello});