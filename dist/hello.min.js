!function(e,t,n){var r=function(e,n,r){var i="string"==typeof e?t.createElement(e):e;if("object"==typeof n)if("tagName"in n)r=n;else for(var o in n)if(n.hasOwnProperty(o))if("object"==typeof n[o])for(var s in n[o])n[o].hasOwnProperty(s)&&(i[o][s]=n[o][s]);else"html"===o?i.innerHTML=n[o]:/^on/.test(o)?i[o]=n[o]:i.setAttribute(o,n[o]);return"body"===r?function a(){t.body?t.body.appendChild(i):setTimeout(a,16)}():"object"==typeof r?r.appendChild(i):"string"==typeof r&&t.getElementsByTagName(r)[0].appendChild(i),i},i=function(e,t){var n={},r=0,i=null,o=null;for(o in e)if(e.hasOwnProperty(o))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[o])for(o in t[0])if(e.hasOwnProperty(o)&&o in e)return t[0];for(o in e)if(e.hasOwnProperty(o))if(i=typeof t[r],"function"==typeof e[o]&&e[o].test(t[r])||"string"==typeof e[o]&&(e[o].indexOf("s")>-1&&"string"===i||e[o].indexOf("o")>-1&&"object"===i||e[o].indexOf("i")>-1&&"number"===i||e[o].indexOf("a")>-1&&"object"===i||e[o].indexOf("f")>-1&&"function"===i))n[o]=t[r++];else if("string"==typeof e[o]&&e[o].indexOf("!")>-1)return!1;return n},o=function L(e){if("nodeName"in e)return e;var t,n={};for(t in e)n[t]="object"==typeof e[t]?L(e[t]):e[t];return n},s=function(t,n){var r="HTML"+(t||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return e[r]?n instanceof e[r]:e.Element?n instanceof e.Element&&(!t||n.tagName&&n.tagName.toLowerCase()===t):!(n instanceof Object||n instanceof Array||n instanceof String||n instanceof Number)&&n.tagName&&n.tagName.toLowerCase()===t},a=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&(t[r.name]="file"===r.type?r:r.value||r.innerHTML)}return t},c=function(t,n){return function(r){var i=r.data;if(t("form",i)?i=n(i.elements):"NodeList"in e&&i instanceof NodeList?i=n(i):t("input",i)&&(i=n([i])),("File"in e&&i instanceof e.File||"Blob"in e&&i instanceof e.Blob||"FileList"in e&&i instanceof e.FileList)&&(i={file:i}),!("FormData"in e&&i instanceof e.FormData))for(var o in i)if(i.hasOwnProperty(o))if("FileList"in e&&i[o]instanceof e.FileList)1===i[o].length&&(i[o]=i[o][0]);else{if(t("input",i[o])&&"file"===i[o].type)continue;t("input",i[o])||t("select",i[o])||t("textArea",i[o])?i[o]=i[o].value:t(null,i[o])&&(i[o]=i[o].innerHTML||i[o].innerText)}return r.data=i,i}}(s,a),u=function(e,t){for(var n=[],r=0;r<t.length;r++)-1===this.indexOf(e,t[r])&&n.push(t[r]);return n},l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},f=function(e){return function(){this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(e,t){if(t&&"function"==typeof t)for(var n=e.split(/[\s\,]+/),r=0;r<n.length;r++)this.events[n[r]]=[t].concat(this.events[n[r]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||this.events[e].splice(n,1)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(e,n){t[t.length-1]=e,this.events[e][n].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e,n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.success=function(e){return this.on("success",e)},this.error=function(e){return this.on("error",e)},this.complete=function(e){return this.on("complete",e)},this.findEvents=function(t,n){var r=t.split(/[\s\,]+/);for(var i in this.events)if(this.events.hasOwnProperty(i)&&e(r,i)>-1)for(var o=0;o<this.events[i].length;o++)n.call(this,i,o)}}}(l),p=function(e,t){for(var n in t)e[n]=t[n]},d=function(t,n){return n=n||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),e[n]=function(){var r=t.apply(this,arguments);if(r)try{delete e[n]}catch(i){}},n},h=function(t){return function(n){var r=e;for(var i in n)if(n.hasOwnProperty(i)&&(t("input",n[i])&&"file"===n[i].type||"FileList"in r&&n[i]instanceof r.FileList||"File"in r&&n[i]instanceof r.File||"Blob"in r&&n[i]instanceof r.Blob))return!0;return!1}}(s),m=function(e){if(!e)return!0;if(e&&e.length>0)return!1;if(e&&0===e.length)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},v=function(n,r){return function(i,o,s,a){var c,u,l=0,f=t.getElementsByTagName("head")[0],p={error:{message:"server_error",code:"server_error"}},d=function(){l++||e.setTimeout(function(){o(p),f.removeChild(u)},0)},h=r(function(e){return p=e,!0},s);if("function"!=typeof i){var m=i;m=m.replace(new RegExp("=\\?(&|$)"),"="+h+"$1"),i=function(e,t){t(e(m,e))}}i(function(e){for(var t in e)e.hasOwnProperty(t)&&"?"===e[t]&&(e[t]=h)},function(t){u=n("script",{id:h,name:h,src:t,async:!0,onload:d,onerror:d,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&d()}}),e.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(c=n("script",{text:"document.getElementById('"+h+"').onerror();"}),u.async=!1),a&&e.setTimeout(function(){p={error:{message:"timeout",code:"timeout"}},d()},a),f.appendChild(u),c&&f.appendChild(c)})}}(r,d),g=function I(e,t){var n,r={};if("object"==typeof e&&"object"==typeof t){for(n in e)r[n]=e[n],n in t&&(r[n]=I(e[n],t[n]));for(n in t)n in e||(r[n]=t[n])}else r=t;return r},y=function(){function e(){}return Object.create?Object.create:function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}(),w=function(e){var t,n,r={};if("string"==typeof e){if(n=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<n.length;i++)t=n[i].match(/([^=]+)=(.*)/),r[t[1]]=decodeURIComponent(t[2]);return r}var o=e;r=[];for(var s in o)o.hasOwnProperty(s)&&o.hasOwnProperty(s)&&r.push([s,"?"===o[s]?"?":encodeURIComponent(o[s])].join("="));return r.join("&")},b=function(e,n){return function(r,i,o,s,a,c){var u=t;if("function"!=typeof r){var l=r;r=function(e,t){t(e(l,e))}}var f,p=null,d=[],h=0,m=null,v=0,g=function(e){v++||s(e)};n(g,a);var y;try{y=u.createElement('<iframe name="'+a+'">')}catch(w){y=u.createElement("iframe")}if(y.name=a,y.id=a,y.style.display="none",o&&o.callbackonload&&(y.onload=function(){g({response:"posted",message:"Content was posted"})}),c&&setTimeout(function(){g({error:{code:"timeout",message:"The post operation timed out"}})},c),u.body.appendChild(y),e("form",i)){for(p=i.form,h=0;h<p.elements.length;h++)p.elements[h]!==i&&p.elements[h].setAttribute("disabled",!0);i=p}if(e("form",i))for(p=i,h=0;h<p.elements.length;h++)p.elements[h].disabled||"file"!==p.elements[h].type||(p.encoding=p.enctype="multipart/form-data",p.elements[h].setAttribute("name","file"));else{for(m in i)i.hasOwnProperty(m)&&e("input",i[m])&&"file"===i[m].type&&(p=i[m].form,p.encoding=p.enctype="multipart/form-data");p||(p=u.createElement("form"),u.body.appendChild(p),f=p);var b;for(m in i)if(i.hasOwnProperty(m)){var k=e("input",i[m])||e("textArea",i[m])||e("select",i[m]);if(k&&i[m].form===p)k&&i[m].name!==m&&(i[m].setAttribute("name",m),i[m].name=m);else{var _=p.elements[m];if(b)for(_ instanceof NodeList||(_=[_]),h=0;h<_.length;h++)_[h].parentNode.removeChild(_[h]);b=u.createElement("input"),b.setAttribute("type","hidden"),b.setAttribute("name",m),b.value=k?i[m].value:e(null,i[m])?i[m].innerHTML||i[m].innerText:i[m],p.appendChild(b)}}for(h=0;h<p.elements.length;h++)b=p.elements[h],b.name in i||b.getAttribute("disabled")===!0||(b.setAttribute("disabled",!0),d.push(b))}p.setAttribute("method","POST"),p.setAttribute("target",a),p.target=a,r({},function(e){p.setAttribute("action",e),setTimeout(function(){p.submit(),setTimeout(function(){try{f&&f.parentNode.removeChild(f)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<d.length;n++)d[n]&&(d[n].setAttribute("disabled",!1),d[n].disabled=!1)},0)},100)})}}(s,d),k=function(e,t){return function(n,r){if(r){var i;for(var o in r)if(n.indexOf(o)>-1){var s="[\\?\\&]"+o+"=[^\\&]*";i=new RegExp(s),n=n.replace(i,"")}}return n+(t(r)?"":(n.indexOf("?")>-1?"&":"?")+e(r))}}(w,m),_=function(t){var n=e.location;for(0===t.indexOf("/")?t=n.protocol+"//"+n.host+t:t.match(/^https?\:\/\//)||(t=(n.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+t).replace(/\/\.\//g,"/"));/\/[^\/]+\/\.\.\//g.test(t);)t=t.replace(/\/[^\/]+\/\.\.\//g,"/");return t},x=function(){for(var n=[e.localStorage,e.sessionStorage],r=0,i=n[r++];i;)try{i.setItem(r,r),i.removeItem(r);break}catch(o){i=n[r++]}return i||(i={getItem:function(e){e+="=";for(var n=t.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].replace(/(^\s+|\s+$)/,"");if(i&&0===i.indexOf(e))return i.substr(e.length)}return null},setItem:function(e,n){t.cookie=e+"="+n}}),function(e,t){var n=JSON.parse(i.getItem("hello"))||{};if(e&&"undefined"==typeof t)return n[e];if(e&&""===t)try{delete n[e]}catch(r){n[e]=null}else{if(!e)return n;n[e]=t}return i.setItem("hello",JSON.stringify(n)),n}}(),O=function(e){return function(t){if("object"!=typeof t)return[];for(var n=[],r=0;r<t.length;r++)t[r]&&0!==t[r].length&&-1===e(n,t[r])&&n.push(t[r]);return n}}(l),T=function(e,t){return function(n,r,i,o,s){function a(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}if("function"!=typeof r){var c=r;r=function(e,t){t(e(c,e))}}var u=new XMLHttpRequest,l=!1;"blob"===n&&(l=n,n="GET"),n=n.toUpperCase(),u.onload=function(){var e=u.response;try{e=JSON.parse(u.responseText)}catch(t){401===u.status&&(e={error:{code:"access_denied",message:u.statusText}})}var r=a(u.getAllResponseHeaders());r.statusCode=u.status,s(e||("DELETE"!==n?{error:{message:"Could not get resource"}}:{}),r)},u.onerror=function(){var e=u.responseText;try{e=JSON.parse(u.responseText)}catch(t){}s(e||{error:{code:"access_denied",message:"Could not get resource"}})};var f,p={};if("GET"===n||"DELETE"===n)e(o)||(p=t(p,o)),o=null;else if(!(!o||"string"==typeof o||o instanceof FormData||o instanceof File||o instanceof Blob)){var d=new FormData;for(f in o)o.hasOwnProperty(f)&&(o[f]instanceof HTMLInputElement?"files"in o[f]&&o[f].files.length>0&&d.append(f,o[f].files[0]):o[f]instanceof Blob?d.append(f,o[f],o.name):d.append(f,o[f]));o=d}return r(p,function(e){if(u.open(n,e,!0),l&&("responseType"in u?u.responseType=l:u.overrideMimeType("text/plain; charset=x-user-defined")),i)for(var t in i)u.setRequestHeader(t,i[t]);u.send(o)}),u}}(m,g),E=function(e,t,n){function r(e,n,r){if(t(e.network,e),!("display"in e&&"page"===e.display)){if(r){var i=e.callback;try{delete e.callback}catch(o){}if(t(e.network,e),!(i in r))return console.error("Error: Callback missing from parent window, snap!"),void 0;try{r[i](e)}catch(o){return console.error("Error thrown whilst executing parent callback, "+i,o),void 0}}try{n.close()}catch(o){}n.addEventListener("load",function(){n.close()}),console.log("Trying to close window")}}return function(t,i){var o=t.location,s=function(e){o.assign?o.assign(e):t.location=e},a=e(n(o.search||""),n(o.hash||""));if(a&&"state"in a){try{var c=JSON.parse(a.state);a=e(a,c)}catch(u){console.error("Could not decode state parameter")}"access_token"in a&&a.access_token&&a.network?(a.expires_in&&0!==parseInt(a.expires_in,10)||(a.expires_in=0),a.expires_in=parseInt(a.expires_in,10),a.expires=(new Date).getTime()/1e3+(a.expires_in||31536e3),r(a,t,i)):"error"in a&&a.error&&a.network&&(a.error={code:a.error,message:a.error_message||a.error_description},r(a,t,i)),a&&a.callback&&"result"in a&&a.result&&a.callback in i&&i[a.callback](JSON.parse(a.result))}else if("oauth_redirect"in a)return s(decodeURIComponent(a.oauth_redirect)),void 0;if(a=n(o.search),a.code&&a.state||a.oauth_token&&a.proxy_url){a.redirect_uri=o.href.replace(/[\?\#].*$/,"");var l=JSON.parse(a.state),f=(l.oauth_proxy||a.proxy_url)+"?"+n(a);s(f)}}}(g,x,w),C=function(e){var n=t.createElement("a");n.href=e},A=function(r,i){var o=t.documentElement,s=e.screen;return function(t,a,c,u){var l=e.screenLeft!==n?e.screenLeft:s.left,f=e.screenTop!==n?e.screenTop:s.top,p=e.innerWidth||o.clientWidth||s.width,d=e.innerHeight||o.clientHeight||s.height,h=(p-c)/2+l,m=(d-u)/2+f,v=function(t){var n=e.open(t,"_blank","resizeable=true,height="+u+",width="+c+",left="+h+",top="+m);return n.addEventListener("loadstart",function(t){var o=t.url;if(0===o.indexOf(a)){var s=r(o),c={location:{assign:function(e){n.addEventListener("exit",function(){setTimeout(function(){v(e)},1e3)}),c.close()},search:s.search,hash:s.hash,href:o},close:function(){n.close&&n.close()}};i(c,e)}}),n};return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(t=a+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(t))),v(t)}}(C,E);!function(t,n,r,i,o,s,a,c,u,l,f,p,d,h,m,v,g,y,w,b,k,_){var x=function(e){return x.use(e)};return a(x,{settings:{redirect_uri:e.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(e){return"undefined"!=typeof e?y("sync_service",e):y("sync_service")},services:{},use:function(e){var t=d(this);return t.settings=d(this.settings),e&&(t.settings.default_service=e),s.call(t),t},init:function(e,t){if(!e)return this.services;for(var n in e)e.hasOwnProperty(n)&&"object"!=typeof e[n]&&(e[n]={id:e[n]});this.services=p(this.services,e);for(n in this.services)this.services.hasOwnProperty(n)&&(this.services[n].scope=this.services[n].scope||{});return t&&(this.settings=p(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=g(t.redirect_uri))),this},login:function(){function r(e){var t;f||(f=!0,e.error?t="complete error failed auth.failed":(t="complete success login auth.login auth",y(e.network,e),e={network:e.network,authResponse:e}),i.emit(t,e))}var i=this.use(),s=n({network:"s",options:"o",callback:"f"},arguments);i.args=s;var a,u=s.options=p(i.settings,s.options||{});if(s.network=i.settings.default_service=s.network||i.settings.default_service,i.on("complete",s.callback),"string"!=typeof s.network||!(s.network in i.services))return i.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),i;var l=i.services[s.network],f=!1,d=c(r);s.qs={client_id:l.id,response_type:u.response_type,redirect_uri:u.redirect_uri,display:u.display,scope:"basic",state:{client_id:l.id,network:s.network,display:u.display,callback:d,state:u.state,oauth_proxy:u.oauth_proxy}};var h=y(s.network),m=u.scope;if(m&&"string"!=typeof m&&(m=m.join(",")),m=(m?m+",":"")+s.qs.scope,h&&"scope"in h&&(m+=","+h.scope.join(",")),s.qs.state.scope=w(m.split(/[,\s]+/)),s.qs.scope=m.replace(/[^,\s]+/gi,function(e){return e in l.scope?l.scope[e]:""}).replace(/[,\s]+/gi,","),s.qs.scope=w(s.qs.scope.split(/,+/)).join(l.scope_delim||","),u.force===!1&&h&&"access_token"in h&&h.access_token&&"expires"in h&&h.expires>(new Date).getTime()/1e3){var b=o(h.scope||[],s.qs.state.scope||[]);if(0===b.length)return i.emit("notice","User already has a valid access_token"),i.emitAfter("complete success login",{network:s.network,authResponse:h}),i}if(s.qs.redirect_uri=g(s.qs.redirect_uri),l.oauth&&(s.qs.state.oauth=l.oauth),s.qs.state=JSON.stringify(s.qs.state),"login"in l&&"function"==typeof l.login&&l.login(s),a=1===parseInt(l.oauth.version,10)?v(u.oauth_proxy,s.qs):v(l.oauth.auth,s.qs),i.emit("notice","Authorization URL "+a),"none"===u.display)t("iframe",{src:a,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body");else if("popup"===u.display){var k=_(a,u.redirect_uri,u.window_width||500,u.window_height||500);k&&k.focus&&k.focus();var x=setInterval(function(){k.closed&&(clearInterval(x),r({error:{code:"cancelled",message:"Login has been cancelled"}}))},100)}else e.location=a;return i},logout:function(){var e=n({name:"s",callback:"f"},arguments),t=this.use();if(t.on("complete",e.callback),e.name=e.name||t.settings.default_service,e.name&&!(e.name in t.services))return t.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),t;if(e.name&&y(e.name))"function"==typeof t.services[e.name].logout&&t.services[e.name].logout(e),y(e.name,"");else{if(e.name)return t.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}}),t;for(var r in t.services)t.services.hasOwnProperty(r)&&t.logout(r);t.service(!1)}return t.emitAfter("complete logout success auth.logout auth",{network:e.name}),t},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?y(e)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),s.call(x),function(t){var n={},r={};t.on("auth.login, auth.logout",function(e){e&&"object"==typeof e&&e.network&&(n[e.network]=y(e.network)||{})}),function i(){var o=(new Date).getTime()/1e3,s=function(e){t.emit("auth."+e,{network:a,authResponse:c})};for(var a in t.services)if(t.services.hasOwnProperty(a)){if(!t.services[a].id)continue;var c=y(a)||{},u=t.services[a],l=n[a]||{};if(c&&"callback"in c){var f=c.callback;try{delete c.callback}catch(p){}y(a,c);try{e[f](c)}catch(p){}}if(c&&"expires"in c&&c.expires<o){var d=!("autorefresh"in u)||u.autorefresh;!d||a in r&&!(r[a]<o)?d||a in r||(s("expired"),r[a]=!0):(t.emit("notice",a+" has expired trying to resignin"),t.login(a,{display:"none",force:!1}),r[a]=o+600);continue}if(l.access_token===c.access_token&&l.expires===c.expires)continue;!c.access_token&&l.access_token?s("logout"):c.access_token&&!l.access_token?s("login"):c.expires!==l.expires&&s("update"),n[a]=c,a in r&&delete r[a]}setTimeout(i,1e3)}()}(x),k(e,e.opener||e.parent),x.api=function(){function t(t){if(s.data=r(d),"get"===s.method){for(var n,i=/[\?\&]([^=&]+)(=([^&]+))?/gi;n=i.exec(t);)s.data[n[1]]=n[3];t=t.replace(/\?.*/,"")}var h=y[{"delete":"del"}[s.method]||s.method]||{},g=h[t]||h["default"]||t,_=function(t){t=t.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(e,t,n){var r=n?n.replace(/^\|/,""):"";return t in s.data?(r=s.data[t],delete s.data[t]):"undefined"==typeof n&&a.emitAfter("error",{error:{code:"missing_attribute_"+t,message:"The attribute "+t+" is missing from the request"}}),r}),t.match(/^https?:\/\//)||(t=y.base+t);var n={},r=function(e,r){e&&("function"==typeof e?e(n):n=p(n,e));var i=v(t,n||{});a.emit("notice","Request "+i),o(s.network,i,s.method,s.data,y.querystring,r)};if(!l(s.data)&&!("FileList"in e)&&u(s.data))return m(r,s.data,"form"in y?y.form(s):null,w),a;if("delete"===s.method){var i=w;w=function(e,t){i(!e||l(e)?{success:!0}:e,t)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in y)||y.xhr&&y.xhr(s,n))){var d=b(s.method,r,s.headers,s.data,w);d.onprogress=function(e){a.emit("progress",e)},d.upload.onprogress=function(e){a.emit("uploadprogress",e)}}else{if(s.callbackID=c(),"jsonp"in y&&y.jsonp(s,n),"api"in y&&y.api(t,s,{access_token:k.access_token},w))return;"post"===s.method?(n.redirect_uri=a.settings.redirect_uri,n.state=JSON.stringify({callback:s.callbackID}),m(r,s.data,"form"in y?y.form(s):null,w,s.callbackID,a.settings.timeout)):(n=p(n,s.data),n.callback=s.callbackID,f(r,w,s.callbackID,a.settings.timeout))}};"function"==typeof g?g(s,_):_(g)}function o(e,t,n,r,i,o){var s=a.services[e],c=k?k.access_token:null,u=s.oauth&&1===parseInt(s.oauth.version,10)?a.settings.oauth_proxy:null;if(u)return o(v(u,{path:t,access_token:c||"",then:"get"===n.toLowerCase()?"redirect":"proxy",method:n,suppress_response_codes:!0})),void 0;var l={access_token:c||""};i&&i(l),o(v(t,l))}var s=n({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),a=this.use();i(s),a.args=s,s.method=(s.method||"get").toLowerCase();var d=s.data=s.data||{};a.on("complete",s.callback),s.path=s.path.replace(/^\/+/,"");var h=(s.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(h in a.services){s.network=h;var g=new RegExp("^"+h+":?/?");s.path=s.path.replace(g,"")}s.network=a.settings.default_service=s.network||a.settings.default_service;var y=a.services[s.network];if(!y)return a.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+s.network}}),a;s.timeout&&(a.settings.timeout=s.timeout),a.emit("notice","API request "+s.method.toUpperCase()+" '"+s.path+"' (request)",s);var w=function(e,n){if(y.wrap&&(s.path in y.wrap||"default"in y.wrap)){var r=s.path in y.wrap?s.path:"default",i=(new Date).getTime(),o=y.wrap[r](e,n,s);o&&(e=o),a.emit("notice","Processing took"+((new Date).getTime()-i))}a.emit("notice","API: "+s.method.toUpperCase()+" '"+s.path+"' (response)",e);var c=null;e&&"paging"in e&&e.paging.next&&(c=function(){t((e.paging.next.match(/^\?/)?s.path:"")+e.paging.next)}),a.emit("complete "+(!e||"error"in e?"error":"success"),e,c)};if(s.method in y&&s.path in y[s.method]&&y[s.method][s.path]===!1)return a.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var k=a.getAuthResponse(s.network);return t(s.path),a},e.hello=x,x}(r,i,o,c,u,f,p,d,h,m,v,g,y,w,b,k,_,x,O,T,E,A)}(window,document);