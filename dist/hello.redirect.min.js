!function(e,t){var n=function a(e,t){var n,r={};if("object"==typeof e&&"object"==typeof t){for(n in e)r[n]=e[n],n in t&&(r[n]=a(e[n],t[n]));for(n in t)n in e||(r[n]=t[n])}else r=t;return r},r=function(){for(var n=[e.localStorage,e.sessionStorage],r=0,i=n[r++];i;)try{i.setItem(r,r),i.removeItem(r);break}catch(o){i=n[r++]}return i||(i={getItem:function(e){e+="=";for(var n=t.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].replace(/(^\s+|\s+$)/,"");if(i&&0===i.indexOf(e))return i.substr(e.length)}return null},setItem:function(e,n){t.cookie=e+"="+n}}),function(e,t){var n=JSON.parse(i.getItem("hello"))||{};if(e&&"undefined"==typeof t)return n[e];if(e&&""===t)try{delete n[e]}catch(r){n[e]=null}else{if(!e)return n;n[e]=t}return i.setItem("hello",JSON.stringify(n)),n}}(),i=function(e){var t,n,r={};if("string"==typeof e){if(n=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<n.length;i++)t=n[i].match(/([^=]+)=(.*)/),r[t[1]]=decodeURIComponent(t[2]);return r}var o=e;r=[];for(var a in o)o.hasOwnProperty(a)&&o.hasOwnProperty(a)&&r.push([a,"?"===o[a]?"?":encodeURIComponent(o[a])].join("="));return r.join("&")},o=function(e,t,n){function r(e,n,r){if(t(e.network,e),!("display"in e&&"page"===e.display)){if(r){var i=e.callback;try{delete e.callback}catch(o){}if(t(e.network,e),!(i in r))return console.error("Error: Callback missing from parent window, snap!"),void 0;try{r[i](e)}catch(o){return console.error("Error thrown whilst executing parent callback, "+i,o),void 0}}try{n.close()}catch(o){}n.addEventListener("load",function(){n.close()}),console.log("Trying to close window")}}return function(t,i){var o=t.location,a=function(e){o.assign?o.assign(e):t.location=e},s=e(n(o.search||""),n(o.hash||""));if(s&&"state"in s){try{var c=JSON.parse(s.state);s=e(s,c)}catch(l){console.error("Could not decode state parameter")}"access_token"in s&&s.access_token&&s.network?(s.expires_in&&0!==parseInt(s.expires_in,10)||(s.expires_in=0),s.expires_in=parseInt(s.expires_in,10),s.expires=(new Date).getTime()/1e3+(s.expires_in||31536e3),r(s,t,i)):"error"in s&&s.error&&s.network&&(s.error={code:s.error,message:s.error_message||s.error_description},r(s,t,i)),s&&s.callback&&"result"in s&&s.result&&s.callback in i&&i[s.callback](JSON.parse(s.result))}else if("oauth_redirect"in s)return a(decodeURIComponent(s.oauth_redirect)),void 0;if(s=n(o.search),s.code&&s.state||s.oauth_token&&s.proxy_url){s.redirect_uri=o.href.replace(/[\?\#].*$/,"");var u=JSON.parse(s.state),f=(u.oauth_proxy||s.proxy_url)+"?"+n(s);a(f)}}}(n,r,i);!function(t){t(e,e.opener||e.parent)}(o)}(window,document);