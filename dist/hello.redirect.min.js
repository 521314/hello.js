/*! hellojs - v0.2.2 - 2014-05-14 */
!function(a,b,c){{var d=function i(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){var d=b[c];if(a instanceof Object&&d instanceof Object&&a!==d)for(var e in d)a[e]=i(a[e],d[e]);else a=d}return a},e=function(a){return function(){var b=Array.prototype.slice.call(arguments);return b.unshift({}),a.apply(null,b)}}(d),f=function(){for(var d=[a.localStorage,a.sessionStorage],e=0,f=d[e++];f;)try{f.setItem(e,e),f.removeItem(e);break}catch(g){f=d[e++]}return f||(f={getItem:function(a){a+="=";for(var c=b.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].replace(/(^\s+|\s+$)/,"");if(e&&0===e.indexOf(a))return e.substr(a.length)}return null},setItem:function(a,c){b.cookie=a+"="+c}}),function(a,b){var d=JSON.parse(f.getItem("hello"))||{};if(a&&b===c)return d[a]||null;if(a&&null===b)try{delete d[a]}catch(e){d[a]=null}else{if(!a)return d;d[a]=b}return f.setItem("hello",JSON.stringify(d)),d||null}}(),g=function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},h=function(a,b,c,d){function e(a,b,d){if(c(a.network,a),!("display"in a&&"page"===a.display)){if(d){var e=a.callback;try{delete a.callback}catch(f){}if(c(a.network,a),!(e in d))return void console.error("Error: Callback missing from parent window, snap!");try{d[e](a)}catch(f){return void console.error("Error thrown whilst executing parent callback, "+e,f)}}try{b.close()}catch(f){}b.addEventListener("load",function(){b.close()}),console.log("Trying to close window")}}return function(c,f){var g=c.location,h=function(a){g.assign?g.assign(a):c.location=a},i=b(d(g.search||""),d(g.hash||""));if(i&&"state"in i){try{var j=JSON.parse(i.state);a(i,j)}catch(k){console.error("Could not decode state parameter")}"access_token"in i&&i.access_token&&i.network?(i.expires_in&&0!==parseInt(i.expires_in,10)||(i.expires_in=0),i.expires_in=parseInt(i.expires_in,10),i.expires=(new Date).getTime()/1e3+(i.expires_in||31536e3),e(i,c,f)):"error"in i&&i.error&&i.network&&(i.error={code:i.error,message:i.error_message||i.error_description},e(i,c,f)),i&&i.callback&&"result"in i&&i.result&&i.callback in f&&f[i.callback](JSON.parse(i.result))}else if("oauth_redirect"in i)return void h(decodeURIComponent(i.oauth_redirect));if(i=d(g.search),i.code&&i.state||i.oauth_token&&i.proxy_url){i.redirect_uri=g.href.replace(/[\?\#].*$/,"");var l=JSON.parse(i.state),m=(l.oauth_proxy||i.proxy_url)+"?"+d(i);h(m)}}}(d,e,f,g);!function(b){b(a,a.opener||a.parent)}(h)}}(window,document);